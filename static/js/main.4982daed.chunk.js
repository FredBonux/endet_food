(this["webpackJsonpendet_food-web"]=this["webpackJsonpendet_food-web"]||[]).push([[0],{43:function(e,t,n){e.exports=n(76)},52:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),o=n.n(c),i=n(22),u=n(11),l=n(8);n(52),n(53);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createElement("path",{id:"icon",fillRule:"evenodd",clipRule:"evenodd",d:"M5.88867 10L11.89 3.99867L17.8913 10H17.89V20H5.89002V10H5.88867ZM3.89002 11.9987L2.4132 13.4755L1 12.0623L10.477 2.58529C11.2574 1.8049 12.5226 1.8049 13.303 2.58529L22.78 12.0623L21.3668 13.4755L19.89 11.9987V20C19.89 21.1046 18.9946 22 17.89 22H5.89002C4.78545 22 3.89002 21.1046 3.89002 20V11.9987Z"}),m=function(e){var t=e.svgRef,n=e.title,a=d(e,["svgRef","title"]);return r.a.createElement("svg",s({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),n?r.a.createElement("title",null,n):null,p)},O=r.a.forwardRef((function(e,t){return r.a.createElement(m,s({svgRef:t},e))}));n.p;function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _=r.a.createElement("path",{id:"icon",fillRule:"evenodd",clipRule:"evenodd",d:"M18.6562 20.897L20.8733 18.6798L20.0925 15.843L20.4327 15.0305L23 13.5818V10.4464L20.44 8.99173L20.1055 8.18067L20.8961 5.34235L18.6774 3.12683L15.8403 3.90748L15.0296 3.56758L13.5808 1H10.4454L8.99072 3.56004L8.17985 3.89446L5.34198 3.10281L3.1267 5.31809L3.90748 8.15567L3.56758 8.96634L1 10.4151V13.5496L3.55774 15.0076L3.89252 15.8193L3.10197 18.6572L5.31809 20.8733L8.15567 20.0925L8.96644 20.4325L10.4153 22.999H13.5498L15.0067 20.4412L15.8183 20.1065L18.6562 20.897ZM18.8527 13.6256L17.9809 15.7078L18.6362 18.0886L18.0678 18.657L15.6921 17.9951L13.609 18.8542L12.3874 20.999H11.5829L10.3714 18.8529L8.29157 17.9808L5.90948 18.6362L5.34205 18.0688L6.00387 15.693L5.14484 13.6101L3.00002 12.3876V11.583L5.14712 10.3715L6.01921 8.29155L5.36377 5.90947L5.93003 5.34321L8.30578 6.00595L10.3896 5.14655L11.6093 3H12.4129L13.6245 5.1471L15.7044 6.0192L18.087 5.36362L18.6558 5.93166L17.9941 8.30696L18.8535 10.3906L21 11.6103V12.4139L18.8527 13.6256ZM12 16C9.79085 16 7.99999 14.2091 7.99999 12C7.99999 9.79086 9.79085 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16ZM14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12Z"}),E=function(e){var t=e.svgRef,n=e.title,a=f(e,["svgRef","title"]);return r.a.createElement("svg",v({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),n?r.a.createElement("title",null,n):null,_)};r.a.forwardRef((function(e,t){return r.a.createElement(E,v({svgRef:t},e))})),n.p;function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var b=r.a.createElement("path",{id:"icon",fillRule:"evenodd",clipRule:"evenodd",d:"M20.1818 3H3.81818C2.81403 3 2 3.89543 2 5V7C2 8.10457 2.81403 9 3.81818 9H20.1818C21.186 9 22 8.10457 22 7V5C22 3.89543 21.186 3 20.1818 3ZM3.81818 11H20.1818C21.186 11 22 11.8954 22 13V15C22 16.1046 21.186 17 20.1818 17H3.81818C2.81403 17 2 16.1046 2 15V13C2 11.8954 2.81403 11 3.81818 11ZM4 13V15H20V13H4ZM4 5V7H20V5H4ZM14 19H2V21H14V19Z"}),g=function(e){var t=e.svgRef,n=e.title,a=N(e,["svgRef","title"]);return r.a.createElement("svg",C({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),n?r.a.createElement("title",null,n):null,b)},T=r.a.forwardRef((function(e,t){return r.a.createElement(g,C({svgRef:t},e))}));n.p;function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var I=r.a.createElement("path",{id:"icon",fillRule:"evenodd",clipRule:"evenodd",d:"M4 9.00001H5.99978C6.00007 9.36655 6.20262 9.71935 6.55279 9.89443C7.04677 10.1414 7.64744 9.9412 7.89443 9.44722L8.11803 9.00001H15.882L16.1056 9.44722C16.3526 9.9412 16.9532 10.1414 17.4472 9.89443C17.7974 9.71935 17.9999 9.36655 18.0002 9.00001H20V11H4V9.00001ZM17.118 7.00001H20C21.1046 7.00001 22 7.89544 22 9.00001V11C22 11.84 21.4821 12.5591 20.7482 12.8553C20.7516 12.9031 20.7534 12.9514 20.7534 13C20.7534 13.1459 20.7374 13.2914 20.7058 13.4339L19.1502 20.4339C18.9468 21.3489 18.1352 22 17.1978 22H6.80217C5.86477 22 5.05315 21.3489 4.8498 20.4339L3.29424 13.4339C3.25094 13.239 3.23767 13.0445 3.25134 12.8552C2.51767 12.5588 2 11.8399 2 11V9.00001C2 7.89544 2.89543 7.00001 4 7.00001H6.88197L9.10557 2.55279C9.35256 2.05881 9.95324 1.85859 10.4472 2.10558C10.9412 2.35257 11.1414 2.95324 10.8944 3.44722L9.11803 7.00001H14.882L13.1056 3.44722C12.8586 2.95324 13.0588 2.35257 13.5528 2.10558C14.0468 1.85859 14.6474 2.05881 14.8944 2.55279L17.118 7.00001ZM5.24662 13H18.7534L17.1978 20H6.80217L5.24662 13Z"}),P=function(e){var t=e.svgRef,n=e.title,a=h(e,["svgRef","title"]);return r.a.createElement("svg",y({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),n?r.a.createElement("title",null,n):null,I)},S=r.a.forwardRef((function(e,t){return r.a.createElement(P,y({svgRef:t},e))})),A=(n.p,function(){var e,t=null===(e=Object(u.f)())||void 0===e?void 0:e.pathname,n=0;return t.indexOf("spesa")>=0?n=1:t.indexOf("dispensa")>=0?n=2:t.indexOf("impostazioni")>=0&&(n=3),r.a.createElement("div",{className:"BottomNavbar"},r.a.createElement("div",{className:"pages"},r.a.createElement(i.b,{to:"/",className:"page ".concat(0===n?"active":"")},r.a.createElement("div",{className:"icon"},r.a.createElement(O,null)),r.a.createElement("div",{className:"text"},"Home")),r.a.createElement(i.b,{to:"/spesa",className:"page ".concat(1===n?"active":"")},r.a.createElement("div",{className:"icon"},r.a.createElement(S,null)),r.a.createElement("div",{className:"text"},"Spesa")),r.a.createElement(i.b,{to:"/dispensa",className:"page ".concat(2===n?"active":"")},r.a.createElement("div",{className:"icon"},r.a.createElement(T,null)),r.a.createElement("div",{className:"text"},"Dispensa"))))}),j=function(e){var t=e.children;return r.a.createElement("div",{className:"DefaultLayout"},t,r.a.createElement(A,null))},L=(n(55),function(e){var t=e.withBackground,n=e.subtitle;return r.a.createElement("div",{className:"Header ".concat(t?"withBackground":"")},r.a.createElement("div",{className:"app-title"},"Ciao Federico!"),r.a.createElement("div",{className:"app-subtitle"},n))}),R=(n(56),n(57),function(e){var t=e.onClickEvent,n=e.children;return r.a.createElement("div",{onClick:t,className:"FloatingActionButton"},n)});function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var M=r.a.createElement("path",{id:"icon",fillRule:"evenodd",clipRule:"evenodd",d:"M13 11H22V13H13V22H11V13H2V11H11V2H13V11Z"}),U=function(e){var t=e.svgRef,n=e.title,a=x(e,["svgRef","title"]);return r.a.createElement("svg",D({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),n?r.a.createElement("title",null,n):null,M)},w=r.a.forwardRef((function(e,t){return r.a.createElement(U,D({svgRef:t},e))})),k=(n.p,function(e){return{type:"ACTION_OPEN_SCAN_MODAL",payload:e}}),H=(n(58),function(e){return{type:"ACTION_FETCH_PANTRY",payload:e}}),F=function(e){return{type:"ACTION_ADD_PRODUCT_TO_PANTRY",payload:e}},G=(n(59),n(17)),V=n.n(G),Y=(n(61),function(e){var t=e.product,n=e.onClickEvent;V.a.locale("it");var a=V()(null===t||void 0===t?void 0:t.expiryDate,"YYYY-MM-DD").fromNow(),c=-V()(new Date).diff(t.expiryDate,"days"),o=c<=0?"expired":c<=3?"expiring":"";return r.a.createElement("div",{onClick:n.bind(void 0),className:"ProductCard card ".concat(o)},r.a.createElement("img",{className:"product-image",src:null===t||void 0===t?void 0:t.image_thumb_url,alt:"product_image"}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"expiry"},a),r.a.createElement("div",{className:"name"},null===t||void 0===t?void 0:t.product_name),r.a.createElement("div",{className:"footer"},(null===t||void 0===t?void 0:t.nutrition_grades)&&r.a.createElement("img",{src:"/img/nutriscore-".concat(null===t||void 0===t?void 0:t.nutrition_grades,".svg"),className:"nutriscore",alt:"nutrition_score"}),(null===t||void 0===t?void 0:t.nova_group)&&r.a.createElement("img",{src:"/img/nova-group-".concat(null===t||void 0===t?void 0:t.nova_group,".svg"),className:"novagroup",alt:"nutrition_score"}),r.a.createElement("div",{className:"qta"},null===t||void 0===t?void 0:t.qta))))}),K=function(e){return{type:"ACTION_SELECT_UPDATING_PRODUCT",payload:e}},Z=Object(l.b)((function(e){return{products:e.pantry.expiring.data}}),{fetchProducts:H,openUpdateProduct:K})((function(e){var t=e.products,n=e.fetchProducts,c=e.openUpdateProduct;Object(a.useState)((function(){null===t&&n()}));var o=null===t||void 0===t?void 0:t.map((function(e){return r.a.createElement(Y,{onClickEvent:function(){return t=e.lsKey,void c(t);var t},key:"expiring-product-".concat(e.code,"-").concat(e.lsKey),product:e})}));return r.a.createElement("div",{className:"PantryExpiringList"},o)})),B=Object(l.b)((function(e){return{expiring:e.pantry.expiring.data}}),{openScanModal:k})((function(e){var t=e.expiring,n=e.openScanModal;return r.a.createElement(j,null,r.a.createElement(L,{withBackground:!0,subtitle:["Hai ",r.a.createElement("strong",{key:"expiring-length"},(null===t||void 0===t?void 0:t.length)||0)," prodotti in scadenza"]}),r.a.createElement("div",{className:"HomePage"},r.a.createElement("div",{className:"content"},r.a.createElement(Z,null)),r.a.createElement(R,{onClickEvent:function(){return n()}},r.a.createElement(w,null))))})),q=n(37),z=(n(62),n(16)),J=n(2),W=n(9),X=(n(63),n(64),function(e){var t=e.product,n=e.onCardClick,a=e.onDeleteClick,c=t.checked?"checked":"";return r.a.createElement("div",{onClick:n,className:"ShoppingItem ProductCard card ".concat(c)},r.a.createElement("div",{className:"checkbox ".concat(c)}),r.a.createElement("div",{className:"product-name"},t.product_name),r.a.createElement("div",{className:"qta"},t.qta),r.a.createElement("div",{onClick:function(e){e.stopPropagation(),a&&"function"===typeof a&&a()}.bind(void 0),className:"delete-btn"},r.a.createElement(w,null)))}),Q=function(e){return{type:"ACTION_REMOVE_FROM_SHOPPING_LIST",payload:e}},$=function(e){return{type:"ACTION_ADD_TO_SHOPPING_LIST",payload:e}},ee=Object(l.b)((function(e){return{items:e.shopping.fetch.data}}),{fetchItems:function(e){return{type:"ACTION_FETCH_SHOPPING_LIST",payload:e}},removeItem:Q,updateItem:$})((function(e){var t,n=e.items,c=e.fetchItems,o=e.updateItem,i=e.removeItem,u=Object(a.useState)(!1),l=Object(W.a)(u,2),s=l[0],d=l[1];Object(a.useEffect)((function(){null===n&&c()}),[n,c]);var p=s?null===(t=Object(z.a)(n))||void 0===t?void 0:t.sort((function(e,t){return e.checked===t.checked?e.lsKey>t.lsKey?1:-1:e.checked?1:-1})):n,m=null===p||void 0===p?void 0:p.map((function(e){return r.a.createElement(X,{product:e,onCardClick:function(){return function(e){o(Object(J.a)({},e,{checked:!e.checked}))}(e)},onDeleteClick:function(){return function(e){i(e)}(e)},key:"shopping-item-".concat(e.lsKey)})}));return r.a.createElement("div",{className:"ShoppingList"},r.a.createElement("div",{className:"list-header"},r.a.createElement("div",{className:"btn btn-simple",onClick:function(){return d(!s)}},s?"Disattiva auto-sort":"Attiva auto-sort")),r.a.createElement("div",{className:"list"},m))})),te=Object(l.b)((function(e){return{items:e.shopping.fetch.data}}),{openInsertModal:function(e){return{type:"ACTION_OPEN_SHOPPING_ITEM_INSERT_MODAL",payload:e}},removeItem:Q})((function(e){var t=e.items,n=e.openInsertModal,a=e.removeItem,c=null===t||void 0===t?void 0:t.some((function(e){return e.checked}));return r.a.createElement(j,null,r.a.createElement(L,{withBackground:!1,subtitle:"Ecco la tua lista della spesa"}),r.a.createElement("div",{className:"SpesaPage"},r.a.createElement("div",{className:"content"},r.a.createElement(ee,null)),r.a.createElement(R,{onClickEvent:function(){return n()}},r.a.createElement(w,null)),c&&r.a.createElement("div",{onClick:function(){var e,n=null===t||void 0===t?void 0:t.filter((function(e){return e.checked})),r=Object(q.a)(n);try{for(r.s();!(e=r.n()).done;){var c=e.value;a(c)}}catch(o){r.e(o)}finally{r.f()}}.bind(void 0),className:"btn add-custom-btn"},"Concludi spesa")))})),ne=(n(65),n(66),Object(l.b)((function(e){return{products:e.pantry.fetch.data}}),{fetchProducts:H,openUpdateProduct:K})((function(e){var t=e.products,n=e.fetchProducts,c=e.openUpdateProduct,o=Object(a.useState)("expiryDate"),i=Object(W.a)(o,2),u=i[0],l=i[1];Object(a.useEffect)((function(){null===t&&n()}));var s=null===t||void 0===t?void 0:t.sort((function(e,t){return e[u]>t[u]?1:-1})),d=null===s||void 0===s?void 0:s.map((function(e){return r.a.createElement(Y,{onClickEvent:function(){return t=e.lsKey,void c(t);var t},key:"pantry-product-".concat(e.code,"-").concat(e.lsKey),product:e})}));return r.a.createElement("div",{className:"PantryList"},r.a.createElement("div",{className:"list-header"},r.a.createElement("label",null,"Ordina per:"),r.a.createElement("select",{onChange:function(e){return l(e.target.value)}},r.a.createElement("option",{value:"expiryDate"},"Data scadenza"),r.a.createElement("option",{value:"product_name"},"Nome"),r.a.createElement("option",{value:"nova_group"},"Nova group"),r.a.createElement("option",{value:"nutrition_grades"},"Nutriscore"))),r.a.createElement("div",{className:"list"},d))}))),ae=Object(l.b)((function(e){return{}}),{openScanModal:k})((function(e){var t=e.openScanModal;return r.a.createElement(j,null,r.a.createElement(L,{withBackground:!1,subtitle:"Ecco cosa hai in dispensa"}),r.a.createElement("div",{className:"PantryPage"},r.a.createElement("div",{className:"content"},r.a.createElement(ne,null)),r.a.createElement(R,{onClickEvent:function(){return t()}},r.a.createElement(w,null))))}));var re=Object(u.g)(Object(l.b)((function(e){return{}}))((function(e){return e.authenticated,r.a.createElement("div",{style:{minHeight:"100%",minWidth:"100%"}},r.a.createElement(u.c,null,r.a.createElement(u.a,{label:"Home",component:B,path:"/",exact:!0}),r.a.createElement(u.a,{label:"Spesa",component:te,path:"/spesa",exact:!0}),r.a.createElement(u.a,{label:"Dispensa",component:ae,path:"/dispensa",exact:!0})))}))),ce=(n(67),n(68),n(20)),oe=n(21),ie=n(40),ue=n(42),le=n(23),se=n.n(le),de=function(e){Object(ue.a)(n,e);var t=Object(ie.a)(n);function n(){return Object(ce.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{id:"interactive",className:"viewport"})}},{key:"componentWillUnmount",value:function(){se.a.offDetected(this._onDetected)}},{key:"_onDetected",value:function(e){this.props.onDetected(e)}},{key:"_onError",value:function(e){this.props.onError(e)}},{key:"stop",value:function(){se.a.stop()}},{key:"componentDidMount",value:function(){var e=this;se.a.init({inputStream:{type:"LiveStream",constraints:{width:window.innerWidth,height:window.innerHeight-72,facingMode:"environment"}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:2,decoder:{readers:["code_128_reader","ean_reader","upc_reader"]},multiple:!1,locate:!0},(function(t){if(t)return e._onError(t),console.log(t);se.a.start()})),se.a.onDetected(this._onDetected.bind(this))}}]),n}(a.Component),pe=(n(69),n(70),function(e){var t=e.product,n=e.onClickEvent;return r.a.createElement("div",{onClick:n,className:"SearchResult card"},r.a.createElement("img",{className:"product-image",src:null===t||void 0===t?void 0:t.image_thumb_url,alt:"product_image"}),r.a.createElement("div",{className:"name"},null===t||void 0===t?void 0:t.product_name))}),me=Object(l.b)((function(e){return{searchState:e.search}}))((function(e){var t=e.searchState,n=e.onProductSelect,a=null===t||void 0===t?void 0:t.results.map((function(e){return r.a.createElement(pe,{key:"product-".concat(e.code),product:e,onClickEvent:function(){return function(e){n&&"function"===typeof n&&n(e)}(e)}})}));return r.a.createElement("div",{className:"SearchContainer"},t.success&&a,t.loading&&r.a.createElement("span",{className:"loading"},"Cerco i prodotti..."),t.loading||t.success||t.error?"":r.a.createElement("span",{className:"waiting"},"Inserisci il nome del prodotto"))})),Oe=Object(l.b)((function(e){var t;return{open:null===(t=e.modals.productScanModal)||void 0===t?void 0:t.open}}),{closeModal:function(e){return{type:"ACTION_CLOSE_SCAN_MODAL",payload:e}},productScan:function(e){return{type:"ACTION_PRODUCT_SCAN",payload:e}},searchForProduct:function(e){return{type:"ACTION_SEARCH_PRODUCT",payload:e}},openManualInsertModal:function(e){return{type:"ACTION_OPEN_PRODUCT_MANUAL_INSERT_MODAL",payload:e}}})((function(e){var t=e.open,n=e.closeModal,c=e.productScan,o=e.searchForProduct,i=e.openManualInsertModal,u=Object(a.useState)(""),l=Object(W.a)(u,2),s=l[0],d=l[1],p=Object(a.useState)(!0),m=Object(W.a)(p,2),O=m[0],v=m[1],f=Object(a.useRef)(null),_=Object(a.useRef)(null),E=function(){f.current&&f.current.stop(),d(""),n()};return r.a.createElement("div",{className:"ProductScanModal ".concat(t?"open":"")},r.a.createElement("div",{className:"header"},r.a.createElement("div",{onClick:E.bind(void 0),className:"close-btn"},r.a.createElement(w,null)),r.a.createElement("div",{className:"app-title"},"Scansiona il codice a barre")),r.a.createElement("div",{className:"search-container"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),f.current&&f.current.stop(),s.length<=2||(_.current&&_.current.blur(),o(s))}.bind(void 0)},r.a.createElement("input",{type:"text",value:s,placeholder:"Cerca un prodotto",ref:_,onChange:function(e){var t=e.target.value;t.length>0&&f.current&&f.current.stop(),d(t)}.bind(void 0)}))),r.a.createElement("div",{className:"reader ".concat(t&&O&&s.length<=0?"":"searching")},t&&O&&s.length<=0?r.a.createElement(de,{ref:f,onDetected:function(e){t&&(f.current&&f.current.stop(),n(),c(e.codeResult))}.bind(void 0),onError:function(){f.current&&f.current.stop(),v(!1)}.bind(void 0)}):r.a.createElement(me,{onProductSelect:function(e){e.code&&(n(),c(e))}.bind(void 0)})),s.length<=0&&r.a.createElement("div",{onClick:function(){E(),i()}.bind(void 0),className:"btn add-custom-btn"},"Inserisci manualmente"))}));n(71);function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function fe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _e=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.41421 12L16.7071 19.2929L15.2929 20.7071L6.58578 12L15.2929 3.29289L16.7071 4.70711L9.41421 12Z"}),Ee=function(e){var t=e.svgRef,n=e.title,a=fe(e,["svgRef","title"]);return r.a.createElement("svg",ve({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),n?r.a.createElement("title",null,n):null,_e)},Ce=r.a.forwardRef((function(e,t){return r.a.createElement(Ee,ve({svgRef:t},e))})),Ne=(n.p,Object(l.b)((function(e){var t;return{open:null===(t=e.modals.productInsertModal)||void 0===t?void 0:t.open,product:e.products.scannedProduct}}),{closeModal:function(e){return{type:"ACTION_CLOSE_PRODUCT_INSERT_MODAL",payload:e}},openScanModal:k,addProduct:F})((function(e){var t=e.open,n=e.closeModal,c=e.openScanModal,o=e.product,i=e.addProduct,u=Object(a.useState)(""),l=Object(W.a)(u,2),s=l[0],d=l[1],p=Object(a.useState)((new Date).toISOString().substr(0,10)),m=Object(W.a)(p,2),O=m[0],v=m[1],f=function(){d(""),v((new Date).toISOString().substr(0,10))};return r.a.createElement("div",{className:"ProductInsertModal ".concat(t?"open":"")},r.a.createElement("div",{className:"header"},r.a.createElement("div",{onClick:function(){f(),n(),c()}.bind(void 0),className:"close-btn"},r.a.createElement(Ce,null)),r.a.createElement("div",{className:"app-title"},"Verifica e aggiungi")),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"product-head"},r.a.createElement("img",{src:null===o||void 0===o?void 0:o.image_thumb_url,className:"product-image",alt:"product-image"}),r.a.createElement("div",{className:"product-info"},r.a.createElement("div",{className:"product-name"},null===o||void 0===o?void 0:o.product_name),r.a.createElement("div",{className:"description"},r.a.createElement("span",{className:"title"},"Ingredienti: "),r.a.createElement("span",{className:"ingredients"},(null===o||void 0===o?void 0:o.ingredients_text_it)||(null===o||void 0===o?void 0:o.ingredients_text_en)||(null===o||void 0===o?void 0:o.ingredients_text))))),r.a.createElement("div",{className:"nutriscore-container"},r.a.createElement("img",{src:"/img/nutriscore-".concat(null===o||void 0===o?void 0:o.nutrition_grades,".svg"),className:"nutriscore",alt:"Nessun nutriscore"}),r.a.createElement("img",{src:"/img/nova-group-".concat(null===o||void 0===o?void 0:o.nova_group,".svg"),className:"novagroup",alt:"Nessun novagroup"})),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"input-group card"},r.a.createElement("div",{className:"label"},"Quantit\xe0"),r.a.createElement("input",{type:"text",placeholder:"100 g",value:s,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:"input-group card"},r.a.createElement("div",{className:"label"},"Data di scadenza"),r.a.createElement("input",{type:"date",className:"date",placeholder:"tra 5 giorni",value:O,onChange:function(e){return v(e.target.value)}})),r.a.createElement("div",{onClick:function(){i(Object(J.a)({},o,{qta:s,expiryDate:O})),f(),n()}.bind(void 0),className:"btn btn-success"},"AGGIUNGI PRODOTTO"))))}))),be=(n(72),Object(l.b)((function(e){var t;return{open:null===(t=e.modals.productUpdateModal)||void 0===t?void 0:t.open,product:e.products.updatingProduct}}),{closeModal:function(e){return{type:"ACTION_CLOSE_UPDATE_PRODUCT_MODAL",payload:e}},updateProduct:F,deleteProduct:function(e){return{type:"ACTION_REMOVE_PRODUCT_FROM_PANTRY",payload:e}}})((function(e){var t=e.open,n=e.closeModal,c=e.product,o=e.updateProduct,i=e.deleteProduct,u=Object(a.useState)(""),l=Object(W.a)(u,2),s=l[0],d=l[1],p=Object(a.useState)(""),m=Object(W.a)(p,2),O=m[0],v=m[1];Object(a.useEffect)((function(){d((null===c||void 0===c?void 0:c.qta)||""),v((null===c||void 0===c?void 0:c.expiryDate)||"")}),[c]);var f=function(){d(""),v((new Date).toISOString().substr(0,10))};return r.a.createElement("div",{className:"ProductUpdateModal ".concat(t?"open":"")},r.a.createElement("div",{className:"header"},r.a.createElement("div",{onClick:function(){f(),n()}.bind(void 0),className:"close-btn"},r.a.createElement(Ce,null)),r.a.createElement("div",{className:"app-title"},"Scheda prodotto")),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"product-head"},r.a.createElement("img",{src:null===c||void 0===c?void 0:c.image_thumb_url,className:"product-image",alt:"product-image"}),r.a.createElement("div",{className:"product-info"},r.a.createElement("div",{className:"product-name"},null===c||void 0===c?void 0:c.product_name),r.a.createElement("div",{className:"description"},r.a.createElement("span",{className:"title"},"Ingredienti: "),r.a.createElement("span",{className:"ingredients"},(null===c||void 0===c?void 0:c.ingredients_text_it)||(null===c||void 0===c?void 0:c.ingredients_text_en)||(null===c||void 0===c?void 0:c.ingredients_text))))),r.a.createElement("div",{className:"nutriscore-container"},(null===c||void 0===c?void 0:c.nutrition_grades)&&r.a.createElement("img",{src:"/img/nutriscore-".concat(null===c||void 0===c?void 0:c.nutrition_grades,".svg"),className:"nutriscore",alt:"Nessun nutriscore"}),(null===c||void 0===c?void 0:c.nova_group)&&r.a.createElement("img",{src:"/img/nova-group-".concat(null===c||void 0===c?void 0:c.nova_group,".svg"),className:"novagroup",alt:"Nessun novagroup"})),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"input-group card"},r.a.createElement("div",{className:"label"},"Quantit\xe0"),r.a.createElement("input",{type:"text",placeholder:"100 g",value:s,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:"input-group card"},r.a.createElement("div",{className:"label"},"Data di scadenza"),r.a.createElement("input",{type:"date",className:"date",value:O,onChange:function(e){return v(e.target.value)}})),r.a.createElement("div",{onClick:function(){console.log([s,O]),o(Object(J.a)({},c,{qta:s||c.qta,expiryDate:O||c.expiryDate})),f(),n()}.bind(void 0),className:"btn btn-success"},"AGGIORNA PRODOTTO"),r.a.createElement("div",{onClick:function(){console.log([s,O]),i({lsKey:c.lsKey}),f(),n()}.bind(void 0),className:"btn btn-simple text-danger"},"RIMUOVI PRODOTTO"))))}))),ge=(n(73),Object(l.b)((function(e){var t;return{open:null===(t=e.modals.productManualInsertModal)||void 0===t?void 0:t.open}}),{closeModal:function(e){return{type:"ACTION_CLOSE_PRODUCT_MANUAL_INSERT_MODAL",payload:e}},openScanModal:k,addProduct:F})((function(e){var t=e.open,n=e.closeModal,c=e.openScanModal,o=e.addProduct,i=Object(a.useState)(""),u=Object(W.a)(i,2),l=u[0],s=u[1],d=Object(a.useState)(""),p=Object(W.a)(d,2),m=p[0],O=p[1],v=Object(a.useState)((new Date).toISOString().substr(0,10)),f=Object(W.a)(v,2),_=f[0],E=f[1],C=function(){s(""),O(""),E((new Date).toISOString().substr(0,10))};return r.a.createElement("div",{className:"ProductManualInsertModal ".concat(t?"open":"")},r.a.createElement("div",{className:"header"},r.a.createElement("div",{onClick:function(){C(),n(),c()}.bind(void 0),className:"close-btn"},r.a.createElement(Ce,null)),r.a.createElement("div",{className:"app-title"},"Aggiungi un prodotto")),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"input-group card"},r.a.createElement("div",{className:"label"},"Nome prodotto"),r.a.createElement("input",{type:"text",placeholder:"Pane e Nutella",value:l,onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",{className:"input-group card"},r.a.createElement("div",{className:"label"},"Quantit\xe0"),r.a.createElement("input",{type:"text",placeholder:"100 g",value:m,onChange:function(e){return O(e.target.value)}})),r.a.createElement("div",{className:"input-group card"},r.a.createElement("div",{className:"label"},"Data di scadenza"),r.a.createElement("input",{type:"date",className:"date",placeholder:"tra 5 giorni",value:_,onChange:function(e){return E(e.target.value)}})),r.a.createElement("div",{onClick:function(){o({product_name:l,qta:m,expiryDate:_,image_thumb_url:"/placeholder.png"}),C(),n()}.bind(void 0),className:"btn btn-success"},"AGGIUNGI PRODOTTO"))))}))),Te=(n(74),Object(l.b)((function(e){var t;return{open:null===(t=e.modals.shoppingListItemInsertModal)||void 0===t?void 0:t.open}}),{closeModal:function(e){return{type:"ACTION_CLOSE_SHOPPING_ITEM_INSERT_MODAL",payload:e}},addItem:$})((function(e){var t=e.open,n=e.closeModal,c=e.addItem,o=Object(a.useState)(""),i=Object(W.a)(o,2),u=i[0],l=i[1],s=Object(a.useState)(""),d=Object(W.a)(s,2),p=d[0],m=d[1],O=function(){l(""),m("")};return r.a.createElement("div",{className:"ShoppingItemInsertModal ".concat(t?"open":"")},r.a.createElement("div",{className:"header"},r.a.createElement("div",{onClick:function(){O(),n()}.bind(void 0),className:"close-btn"},r.a.createElement(Ce,null)),r.a.createElement("div",{className:"app-title"},"Aggiungi un prodotto")),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"input-group card"},r.a.createElement("div",{className:"label"},"Nome prodotto"),r.a.createElement("input",{type:"text",placeholder:"Pane e Nutella",value:u,onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",{className:"input-group card"},r.a.createElement("div",{className:"label"},"Quantit\xe0"),r.a.createElement("input",{type:"text",placeholder:"100 g",value:p,onChange:function(e){return m(e.target.value)}})),r.a.createElement("div",{onClick:function(){c({product_name:u,qta:p,image_thumb_url:"/placeholder.png"}),O(),n()}.bind(void 0),className:"btn btn-success"},"AGGIUNGI PRODOTTO"))))})));var ye=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,{basename:window.baseUrl},r.a.createElement(re,null)),r.a.createElement(Oe,null),r.a.createElement(Ne,null),r.a.createElement(ge,null),r.a.createElement(be,null),r.a.createElement(Te,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=n(14),Ie=n(38),Pe={loading:!1,success:!1,error:!1,data:null},Se={addItem:Object(J.a)({},Pe),fetch:Object(J.a)({},Pe),completed:Object(J.a)({},Pe)},Ae={};Ae.ACTION_REMOVE_FROM_SHOPPING_LIST=function(e,t){return Object(J.a)({},e)},Ae.ACTION_REMOVE_FROM_SHOPPING_LIST_SUCCESS=function(e,t){return Object(J.a)({},e)},Ae.ACTION_REMOVE_FROM_SHOPPING_LIST_FAILURE=function(e,t){return Object(J.a)({},e)},Ae.ACTION_FETCH_SHOPPING_LIST=function(e,t){return Object(J.a)({},e,{fetch:Object(J.a)({},Pe,{loading:!0})})},Ae.ACTION_FETCH_SHOPPING_LIST_SUCCESS=function(e,t){return Object(J.a)({},e,{fetch:Object(J.a)({},Pe,{success:!0,data:Object(z.a)(t.payload.list)}),completed:Object(J.a)({},Pe,{success:!0,data:Object(z.a)(t.payload.completed)})})},Ae.ACTION_FETCH_SHOPPING_LIST_FAILURE=function(e,t){return Object(J.a)({},e,{fetch:Object(J.a)({},Pe,{error:!0})})},Ae.ACTION_ADD_TO_SHOPPING_LIST=function(e,t){return Object(J.a)({},e,{addItem:Object(J.a)({},Pe,{loading:!0})})},Ae.ACTION_ADD_TO_SHOPPING_LIST_SUCCESS=function(e,t){return Object(J.a)({},e,{addItem:Object(J.a)({},Pe,{success:!0})})},Ae.ACTION_ADD_TO_SHOPPING_LIST_FAILURE=function(e,t){return Object(J.a)({},e,{addItem:Object(J.a)({},Pe,{error:!0})})};var je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;return"function"===typeof Ae[t.type]?Ae[t.type](e,t):e},Le={loading:!1,success:!1,error:!1,data:null},Re={addProduct:Le,fetch:Le,expiring:Le},De={};De.ACTION_REMOVE_PRODUCT_FROM_PANTRY=function(e,t){return Object(J.a)({},e)},De.ACTION_REMOVE_PRODUCT_FROM_PANTRY_SUCCESS=function(e,t){return Object(J.a)({},e)},De.ACTION_REMOVE_PRODUCT_FROM_PANTRY_FAILURE=function(e,t){return Object(J.a)({},e)},De.ACTION_FETCH_PANTRY=function(e,t){var n=Object(J.a)({},e);return n.fetch=Object(J.a)({},n.fetch,{loading:!0}),n},De.ACTION_FETCH_PANTRY_SUCCESS=function(e,t){var n=Object(J.a)({},e);return n.fetch=Object(J.a)({},n.fetch,{success:!0,data:Object(z.a)(t.payload.pantry)}),n.expiring=Object(J.a)({},n.expiring,{success:!0,data:Object(z.a)(t.payload.expiring)}),n},De.ACTION_FETCH_PANTRY_FAILURE=function(e,t){var n=Object(J.a)({},e);return n.fetch=Object(J.a)({},n.fetch,{error:!0}),n},De.ACTION_ADD_PRODUCT_TO_PANTRY=function(e,t){var n=Object(J.a)({},e);return n.addProduct=Object(J.a)({},n.addProduct,{loading:!0}),n},De.ACTION_ADD_PRODUCT_TO_PANTRY_SUCCESS=function(e,t){var n=Object(J.a)({},e);return n.addProduct=Object(J.a)({},n.addProduct,{success:!0}),n},De.ACTION_ADD_PRODUCT_TO_PANTRY_FAILURE=function(e,t){var n=Object(J.a)({},e);return n.addProduct=Object(J.a)({},n.addProduct,{error:!0}),n};var xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;return"function"===typeof De[t.type]?De[t.type](e,t):e},Me={loading:!1,success:!1,error:!1,results:[]},Ue={};Ue.ACTION_CLEAR_SEARCH_RESULT=function(e,t){return Object(J.a)({},Me)},Ue.ACTION_SEARCH_PRODUCT=function(e,t){Object(J.a)({},e);return{loading:!0,success:!1,error:!1,results:[]}},Ue.ACTION_SEARCH_PRODUCT_SUCCESS=function(e,t){Object(J.a)({},e);return{loading:!1,success:!0,error:!1,results:t.payload.filter((function(e){var t;return(null===(t=e.product_name)||void 0===t?void 0:t.length)>0&&e.code.length>0}))}},Ue.ACTION_SEARCH_PRODUCT_FAILURE=function(e,t){Object(J.a)({},e);return{loading:!1,success:!1,error:!0,results:[]}};var we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;return"function"===typeof Ue[t.type]?Ue[t.type](e,t):e},ke={open:!1},He={productScanModal:ke,productInsertModal:ke,productManualInsertModal:ke,productUpdateModal:ke,shoppingListItemInsertModal:ke},Fe={};Fe.ACTION_CLOSE_SHOPPING_ITEM_INSERT_MODAL=function(e,t){var n=Object(J.a)({},e);return n.shoppingListItemInsertModal={open:!1},n},Fe.ACTION_OPEN_SHOPPING_ITEM_INSERT_MODAL=function(e,t){var n=Object(J.a)({},e);return n.shoppingListItemInsertModal={open:!0},n},Fe.ACTION_CLOSE_PRODUCT_MANUAL_INSERT_MODAL=function(e,t){var n=Object(J.a)({},e);return n.productManualInsertModal={open:!1},n},Fe.ACTION_OPEN_PRODUCT_MANUAL_INSERT_MODAL=function(e,t){var n=Object(J.a)({},e);return n.productManualInsertModal={open:!0},n},Fe.ACTION_CLOSE_UPDATE_PRODUCT_MODAL=function(e,t){var n=Object(J.a)({},e);return n.productUpdateModal={open:!1},n},Fe.ACTION_OPEN_UPDATE_PRODUCT_MODAL=function(e,t){var n=Object(J.a)({},e);return n.productUpdateModal={open:!0},n},Fe.ACTION_CLOSE_PRODUCT_INSERT_MODAL=function(e,t){var n=Object(J.a)({},e);return n.productInsertModal={open:!1},n},Fe.ACTION_OPEN_PRODUCT_INSERT_MODAL=function(e,t){var n=Object(J.a)({},e);return n.productInsertModal={open:!0},n},Fe.ACTION_CLOSE_SCAN_MODAL=function(e,t){var n=Object(J.a)({},e);return n.productScanModal={open:!1},n},Fe.ACTION_OPEN_SCAN_MODAL=function(e,t){var n=Object(J.a)({},e);return n.productScanModal={open:!0},n};var Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;return"function"===typeof Fe[t.type]?Fe[t.type](e,t):e},Ve={},Ye={};Ye.ACTION_PRODUCT_UPDATE_CANCEL=function(e,t){var n=Object(J.a)({},e);return n.updatingProduct=null,n},Ye.ACTION_SELECT_UPDATING_PRODUCT=function(e,t){return Object(J.a)({},e)},Ye.ACTION_SELECT_UPDATING_PRODUCT_SUCCESS=function(e,t){var n=Object(J.a)({},e);return n.updatingProduct=t.payload,n},Ye.ACTION_SELECT_UPDATING_PRODUCT_FAILURE=function(e,t){return Object(J.a)({},e)},Ye.ACTION_PRODUCT_SCAN=function(e,t){return Object(J.a)({},e)},Ye.ACTION_PRODUCT_SCAN_SUCCESS=function(e,t){var n=Object(J.a)({},e);return n.scannedProduct=t.payload,n},Ye.ACTION_PRODUCT_SCAN_FAILURE=function(e,t){return Object(J.a)({},e)},Ye.ACTION_FETCH_PRODUCT=function(e,t){return Object(J.a)({},e)},Ye.ACTION_FETCH_PRODUCT_SUCCESS=function(e,t){var n=Object(J.a)({},e);return n.product=t.payload,n},Ye.ACTION_FETCH_PRODUCT_FAILURE=function(e,t){return Object(J.a)({},e)};var Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;return"function"===typeof Ye[t.type]?Ye[t.type](e,t):e},Ze=Object(he.c)({shopping:je,pantry:xe,search:we,modals:Ge,products:Ke}),Be=n(3),qe=n.n(Be),ze=n(4),Je=function(){function e(){Object(ce.a)(this,e),this._list=null}return Object(oe.a)(e,[{key:"getList",value:function(){if(this._list)return this._list;var e=localStorage.getItem(this.lsKey),t=JSON.parse(e);return t?(this._list=this._mapList(t),this._list):[]}},{key:"getCompleted",value:function(){return this.getList().filter((function(e){return!!e.checked}))}},{key:"setList",value:function(e){var t=JSON.stringify(e);t&&(localStorage.setItem(this.lsKey,t),this._list=this._mapList(e))}},{key:"insertIntoList",value:function(e,t){var n=this.getList(),a=void 0!==t?t:void 0!==e.lsKey?e.lsKey:-1;if(a<0)return this._addToList(e);n[a]=e,this.setList(n)}},{key:"_addToList",value:function(e){var t=this.getList();t.push(e),this.setList(t)}},{key:"_mapList",value:function(e){return e.map((function(e,t){return e.lsKey=t,e}))}},{key:"getProduct",value:function(e){return this.getList()[e]}},{key:"removeFromList",value:function(e){var t=this.getList(),n=e.lsKey;n<0||void 0===n||null===n||(t.splice(n,1),this.setList(t))}},{key:"lsKey",get:function(){return"endet_shopping"}}]),e}();Je.EXPIRING_DAYS=7;var We=new Je,Xe=qe.a.mark(tt),Qe=qe.a.mark(nt),$e=qe.a.mark(at),et=qe.a.mark(rt);function tt(e){var t;return qe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,We.removeFromList(t),n.next=4,Object(ze.b)({type:"ACTION_REMOVE_FROM_SHOPPING_LIST_SUCCESS"});case 4:return n.next=6,Object(ze.b)({type:"ACTION_FETCH_SHOPPING_LIST"});case 6:case"end":return n.stop()}}),Xe)}function nt(e){return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.payload,t.next=3,Object(ze.b)({type:"ACTION_FETCH_SHOPPING_LIST_SUCCESS",payload:{list:We.getList(),completed:We.getCompleted()}});case 3:case"end":return t.stop()}}),Qe)}function at(e){var t;return qe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,We.insertIntoList(t),n.next=4,Object(ze.b)({type:"ACTION_ADD_TO_SHOPPING_LIST_SUCCESS"});case 4:return n.next=6,Object(ze.b)({type:"ACTION_FETCH_SHOPPING_LIST"});case 6:case"end":return n.stop()}}),$e)}function rt(){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ze.c)("ACTION_REMOVE_FROM_SHOPPING_LIST",tt);case 2:return e.next=4,Object(ze.c)("ACTION_FETCH_SHOPPING_LIST",nt);case 4:return e.next=6,Object(ze.c)("ACTION_ADD_TO_SHOPPING_LIST",at);case 6:case"end":return e.stop()}}),et)}var ct=rt,ot=function(){function e(){Object(ce.a)(this,e),this._pantry=null}return Object(oe.a)(e,[{key:"getPantry",value:function(){if(this._pantry)return this._pantry;var e=localStorage.getItem(this.lsKey),t=JSON.parse(e);return t?(this._pantry=this._mapPantry(t),this._pantry):[]}},{key:"getExpiring",value:function(){return this.getPantry().map((function(e){return e.dateDiff=-V()(new Date).diff(e.expiryDate,"days"),e})).filter((function(t){return t.dateDiff<=e.EXPIRING_DAYS})).sort((function(e,t){return e.dateDiff-t.dateDiff}))}},{key:"setPantry",value:function(e){var t=JSON.stringify(e);t&&(localStorage.setItem(this.lsKey,t),this._pantry=this._mapPantry(e))}},{key:"insertIntoPantry",value:function(e,t){var n=this.getPantry(),a=void 0!==t?t:void 0!==e.lsKey?e.lsKey:-1;if(a<0)return this._addToPantry(e);n[a]=e,this.setPantry(n)}},{key:"_addToPantry",value:function(e){var t=this.getPantry();t.push(e),this.setPantry(t)}},{key:"_mapPantry",value:function(e){return e.map((function(e,t){return e.lsKey=t,e}))}},{key:"getProduct",value:function(e){return this.getPantry()[e]}},{key:"removeFromPantry",value:function(e){var t=this.getPantry(),n=e.lsKey;n<0||void 0===n||null===n||(t.splice(n,1),this.setPantry(t))}},{key:"lsKey",get:function(){return"endet_pantry"}}]),e}();ot.EXPIRING_DAYS=7;var it=new ot,ut=qe.a.mark(pt),lt=qe.a.mark(mt),st=qe.a.mark(Ot),dt=qe.a.mark(vt);function pt(e){var t;return qe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,it.removeFromPantry(t),n.next=4,Object(ze.b)({type:"ACTION_REMOVE_PRODUCT_FROM_PANTRY_SUCCESS"});case 4:return n.next=6,Object(ze.b)({type:"ACTION_FETCH_PANTRY"});case 6:case"end":return n.stop()}}),ut)}function mt(e){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ze.b)({type:"ACTION_FETCH_PANTRY_SUCCESS",payload:{pantry:it.getPantry(),expiring:it.getExpiring()}});case 2:case"end":return e.stop()}}),lt)}function Ot(e){var t;return qe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,it.insertIntoPantry(t),n.next=4,Object(ze.b)({type:"ACTION_ADD_PRODUCT_TO_PANTRY_SUCCESS"});case 4:return n.next=6,Object(ze.b)({type:"ACTION_FETCH_PANTRY"});case 6:return n.next=8,Object(ze.b)({type:"ACTION_CLEAR_SEARCH_RESULT"});case 8:case"end":return n.stop()}}),st)}function vt(){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ze.c)("ACTION_REMOVE_PRODUCT_FROM_PANTRY",pt);case 2:return e.next=4,Object(ze.c)("ACTION_FETCH_PANTRY",mt);case 4:return e.next=6,Object(ze.c)("ACTION_ADD_PRODUCT_TO_PANTRY",Ot);case 6:case"end":return e.stop()}}),dt)}var ft=vt,_t=qe.a.mark(Ct),Et=qe.a.mark(Nt);function Ct(e){var t,n;return qe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,fetch("https://it.openfoodfacts.org/cgi/search.pl?action=process&json=true&simple_search=1&sort_by=unique_scans_n&fields=code,image_thumb_url,product_name,nutrition_grades,nova_group,ingredients_text_it,ingredients_text_en,ingredients_text&search_terms=".concat(encodeURI(t))).then((function(e){return e.json()}));case 3:if(!(n=a.sent)){a.next=9;break}return a.next=7,Object(ze.b)({type:"ACTION_SEARCH_PRODUCT_SUCCESS",payload:n.products});case 7:a.next=11;break;case 9:return a.next=11,Object(ze.b)({type:"ACTION_SEARCH_PRODUCT_FAILURE"});case 11:case"end":return a.stop()}}),_t)}function Nt(){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ze.d)("ACTION_SEARCH_PRODUCT",Ct);case 2:case"end":return e.stop()}}),Et)}var bt=Nt,gt=qe.a.mark(Dt),Tt=qe.a.mark(xt),yt=qe.a.mark(Mt),ht=qe.a.mark(Ut),It=qe.a.mark(wt),Pt=qe.a.mark(kt),St=qe.a.mark(Ht),At=qe.a.mark(Ft),jt=qe.a.mark(Gt),Lt=qe.a.mark(Vt),Rt=qe.a.mark(Yt);function Dt(e){return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),gt)}function xt(e){return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),Tt)}function Mt(e){return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),yt)}function Ut(e){return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),ht)}function wt(e){return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.payload,t.next=3,Object(ze.b)({type:"ACTION_PRODUCT_UPDATE_CANCEL"});case 3:case"end":return t.stop()}}),It)}function kt(e){return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),Pt)}function Ht(e){return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),St)}function Ft(e){return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),At)}function Gt(e){return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.payload,t.next=3,Object(ze.b)({type:"ACTION_CLEAR_SEARCH_RESULT"});case 3:case"end":return t.stop()}}),jt)}function Vt(e){return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),Lt)}function Yt(){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ze.c)("ACTION_CLOSE_SHOPPING_ITEM_INSERT_MODAL",Dt);case 2:return e.next=4,Object(ze.c)("ACTION_OPEN_SHOPPING_ITEM_INSERT_MODAL",xt);case 4:return e.next=6,Object(ze.c)("ACTION_CLOSE_PRODUCT_MANUAL_INSERT_MODAL",Mt);case 6:return e.next=8,Object(ze.c)("ACTION_OPEN_PRODUCT_MANUAL_INSERT_MODAL",Ut);case 8:return e.next=10,Object(ze.c)("ACTION_CLOSE_UPDATE_PRODUCT_MODAL",wt);case 10:return e.next=12,Object(ze.c)("ACTION_OPEN_UPDATE_PRODUCT_MODAL",kt);case 12:return e.next=14,Object(ze.c)("ACTION_CLOSE_PRODUCT_INSERT_MODAL",Ht);case 14:return e.next=16,Object(ze.c)("ACTION_OPEN_PRODUCT_INSERT_MODAL",Ft);case 16:return e.next=18,Object(ze.c)("ACTION_CLOSE_SCAN_MODAL",Gt);case 18:return e.next=20,Object(ze.c)("ACTION_OPEN_SCAN_MODAL",Vt);case 20:case"end":return e.stop()}}),Rt)}var Kt=Yt,Zt=qe.a.mark(Wt),Bt=qe.a.mark(Xt),qt=qe.a.mark(Qt),zt=qe.a.mark($t),Jt=qe.a.mark(en);function Wt(e){return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),Zt)}function Xt(e){var t;return qe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Object(ze.b)({type:"ACTION_SELECT_UPDATING_PRODUCT_SUCCESS",payload:it.getProduct(t)});case 3:return n.next=5,Object(ze.b)({type:"ACTION_OPEN_UPDATE_PRODUCT_MODAL"});case 5:case"end":return n.stop()}}),Bt)}function Qt(e){var t,n,a,r;return qe.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!((n=e.payload).code&&(null===(t=n.product_name)||void 0===t?void 0:t.length)>0)){c.next=8;break}return c.next=4,Object(ze.b)({type:"ACTION_PRODUCT_SCAN_SUCCESS",payload:n});case 4:return c.next=6,Object(ze.b)({type:"ACTION_OPEN_PRODUCT_INSERT_MODAL"});case 6:c.next=21;break;case 8:return a="https://world.openfoodfacts.org/api/v0/product/".concat(n.code,".json?fields=image_thumb_url,product_name,nutrition_grades,nova_group,ingredients_text_it,ingredients_text_en,ingredients_text"),c.next=11,fetch(a).then((function(e){return e.json()}));case 11:if(1!==(r=c.sent).status||!r.product){c.next=19;break}return c.next=15,Object(ze.b)({type:"ACTION_PRODUCT_SCAN_SUCCESS",payload:r.product});case 15:return c.next=17,Object(ze.b)({type:"ACTION_OPEN_PRODUCT_INSERT_MODAL"});case 17:c.next=21;break;case 19:return c.next=21,Object(ze.b)({type:"ACTION_PRODUCT_SCAN_FAILURE",payload:r});case 21:case"end":return c.stop()}}),qt)}function $t(e){var t;return qe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.payload,"https://world.openfoodfacts.org/api/v0/product/3302749508029.json?fields=image_thumb_url,product_name,nutrition_grades,nova_group",n.next=4,fetch("https://world.openfoodfacts.org/api/v0/product/3302749508029.json?fields=image_thumb_url,product_name,nutrition_grades,nova_group").then((function(e){return e.json()}));case 4:if(1!==(t=n.sent).status||!t.product){n.next=10;break}return n.next=8,Object(ze.b)({type:"ACTION_FETCH_PRODUCT_SUCCESS",payload:t.product});case 8:n.next=12;break;case 10:return n.next=12,Object(ze.b)({type:"ACTION_FETCH_PRODUCT_FAILURE",payload:t});case 12:case"end":return n.stop()}}),zt)}function en(){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ze.c)("ACTION_PRODUCT_UPDATE_CANCEL",Wt);case 2:return e.next=4,Object(ze.c)("ACTION_SELECT_UPDATING_PRODUCT",Xt);case 4:return e.next=6,Object(ze.d)("ACTION_PRODUCT_SCAN",Qt);case 6:return e.next=8,Object(ze.c)("ACTION_FETCH_PRODUCT",$t);case 8:case"end":return e.stop()}}),Jt)}var tn=en,nn=qe.a.mark(an);function an(){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ze.a)([ct(),ft(),bt(),Kt(),tn()]);case 2:case"end":return e.stop()}}),nn)}var rn=an,cn=n(41),on=n(39),un=n.n(on);o.a.render(r.a.createElement(l.a,{store:function(){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||he.d,t=Object(cn.a)(),n=[Ie.a,un.a,t],a=Object(he.e)(Ze,e(he.a.apply(void 0,n)));return t.run(rn),a}()},r.a.createElement(ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.4982daed.chunk.js.map