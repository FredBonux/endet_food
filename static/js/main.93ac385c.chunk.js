(this["webpackJsonpendet_food-web"]=this["webpackJsonpendet_food-web"]||[]).push([[0],{42:function(e,t,n){e.exports=n(71)},51:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),o=n.n(c),i=n(17),u=n(10),l=n(8);n(51),n(52);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createElement("path",{id:"icon",fillRule:"evenodd",clipRule:"evenodd",d:"M5.88867 10L11.89 3.99867L17.8913 10H17.89V20H5.89002V10H5.88867ZM3.89002 11.9987L2.4132 13.4755L1 12.0623L10.477 2.58529C11.2574 1.8049 12.5226 1.8049 13.303 2.58529L22.78 12.0623L21.3668 13.4755L19.89 11.9987V20C19.89 21.1046 18.9946 22 17.89 22H5.89002C4.78545 22 3.89002 21.1046 3.89002 20V11.9987Z"}),v=function(e){var t=e.svgRef,n=e.title,a=d(e,["svgRef","title"]);return r.a.createElement("svg",s({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),n?r.a.createElement("title",null,n):null,p)},f=r.a.forwardRef((function(e,t){return r.a.createElement(v,s({svgRef:t},e))}));n.p;function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function O(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _=r.a.createElement("path",{id:"icon",fillRule:"evenodd",clipRule:"evenodd",d:"M18.6562 20.897L20.8733 18.6798L20.0925 15.843L20.4327 15.0305L23 13.5818V10.4464L20.44 8.99173L20.1055 8.18067L20.8961 5.34235L18.6774 3.12683L15.8403 3.90748L15.0296 3.56758L13.5808 1H10.4454L8.99072 3.56004L8.17985 3.89446L5.34198 3.10281L3.1267 5.31809L3.90748 8.15567L3.56758 8.96634L1 10.4151V13.5496L3.55774 15.0076L3.89252 15.8193L3.10197 18.6572L5.31809 20.8733L8.15567 20.0925L8.96644 20.4325L10.4153 22.999H13.5498L15.0067 20.4412L15.8183 20.1065L18.6562 20.897ZM18.8527 13.6256L17.9809 15.7078L18.6362 18.0886L18.0678 18.657L15.6921 17.9951L13.609 18.8542L12.3874 20.999H11.5829L10.3714 18.8529L8.29157 17.9808L5.90948 18.6362L5.34205 18.0688L6.00387 15.693L5.14484 13.6101L3.00002 12.3876V11.583L5.14712 10.3715L6.01921 8.29155L5.36377 5.90947L5.93003 5.34321L8.30578 6.00595L10.3896 5.14655L11.6093 3H12.4129L13.6245 5.1471L15.7044 6.0192L18.087 5.36362L18.6558 5.93166L17.9941 8.30696L18.8535 10.3906L21 11.6103V12.4139L18.8527 13.6256ZM12 16C9.79085 16 7.99999 14.2091 7.99999 12C7.99999 9.79086 9.79085 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16ZM14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12Z"}),E=function(e){var t=e.svgRef,n=e.title,a=O(e,["svgRef","title"]);return r.a.createElement("svg",m({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),n?r.a.createElement("title",null,n):null,_)},g=r.a.forwardRef((function(e,t){return r.a.createElement(E,m({svgRef:t},e))}));n.p;function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var N=r.a.createElement("path",{id:"icon",fillRule:"evenodd",clipRule:"evenodd",d:"M20.1818 3H3.81818C2.81403 3 2 3.89543 2 5V7C2 8.10457 2.81403 9 3.81818 9H20.1818C21.186 9 22 8.10457 22 7V5C22 3.89543 21.186 3 20.1818 3ZM3.81818 11H20.1818C21.186 11 22 11.8954 22 13V15C22 16.1046 21.186 17 20.1818 17H3.81818C2.81403 17 2 16.1046 2 15V13C2 11.8954 2.81403 11 3.81818 11ZM4 13V15H20V13H4ZM4 5V7H20V5H4ZM14 19H2V21H14V19Z"}),y=function(e){var t=e.svgRef,n=e.title,a=b(e,["svgRef","title"]);return r.a.createElement("svg",C({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),n?r.a.createElement("title",null,n):null,N)},h=r.a.forwardRef((function(e,t){return r.a.createElement(y,C({svgRef:t},e))}));n.p;function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var S=r.a.createElement("path",{id:"icon",fillRule:"evenodd",clipRule:"evenodd",d:"M4 9.00001H5.99978C6.00007 9.36655 6.20262 9.71935 6.55279 9.89443C7.04677 10.1414 7.64744 9.9412 7.89443 9.44722L8.11803 9.00001H15.882L16.1056 9.44722C16.3526 9.9412 16.9532 10.1414 17.4472 9.89443C17.7974 9.71935 17.9999 9.36655 18.0002 9.00001H20V11H4V9.00001ZM17.118 7.00001H20C21.1046 7.00001 22 7.89544 22 9.00001V11C22 11.84 21.4821 12.5591 20.7482 12.8553C20.7516 12.9031 20.7534 12.9514 20.7534 13C20.7534 13.1459 20.7374 13.2914 20.7058 13.4339L19.1502 20.4339C18.9468 21.3489 18.1352 22 17.1978 22H6.80217C5.86477 22 5.05315 21.3489 4.8498 20.4339L3.29424 13.4339C3.25094 13.239 3.23767 13.0445 3.25134 12.8552C2.51767 12.5588 2 11.8399 2 11V9.00001C2 7.89544 2.89543 7.00001 4 7.00001H6.88197L9.10557 2.55279C9.35256 2.05881 9.95324 1.85859 10.4472 2.10558C10.9412 2.35257 11.1414 2.95324 10.8944 3.44722L9.11803 7.00001H14.882L13.1056 3.44722C12.8586 2.95324 13.0588 2.35257 13.5528 2.10558C14.0468 1.85859 14.6474 2.05881 14.8944 2.55279L17.118 7.00001ZM5.24662 13H18.7534L17.1978 20H6.80217L5.24662 13Z"}),A=function(e){var t=e.svgRef,n=e.title,a=P(e,["svgRef","title"]);return r.a.createElement("svg",T({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),n?r.a.createElement("title",null,n):null,S)},j=r.a.forwardRef((function(e,t){return r.a.createElement(A,T({svgRef:t},e))})),R=(n.p,function(){var e,t=null===(e=Object(u.f)())||void 0===e?void 0:e.pathname,n=0;return t.indexOf("spesa")>=0?n=1:t.indexOf("dispensa")>=0?n=2:t.indexOf("impostazioni")>=0&&(n=3),r.a.createElement("div",{className:"BottomNavbar"},r.a.createElement("div",{className:"pages"},r.a.createElement(i.b,{to:"/",className:"page ".concat(0===n?"active":"")},r.a.createElement("div",{className:"icon"},r.a.createElement(f,null)),r.a.createElement("div",{className:"text"},"Home")),r.a.createElement(i.b,{to:"/spesa",className:"page ".concat(1===n?"active":"")},r.a.createElement("div",{className:"icon"},r.a.createElement(j,null)),r.a.createElement("div",{className:"text"},"Spesa")),r.a.createElement(i.b,{to:"/dispensa",className:"page ".concat(2===n?"active":"")},r.a.createElement("div",{className:"icon"},r.a.createElement(h,null)),r.a.createElement("div",{className:"text"},"Dispensa")),r.a.createElement(i.b,{to:"/impostazioni",className:"page ".concat(3===n?"active":"")},r.a.createElement("div",{className:"icon"},r.a.createElement(g,null)),r.a.createElement("div",{className:"text"},"Impostazioni"))))}),L=function(e){var t=e.children;return r.a.createElement("div",{className:"DefaultLayout"},t,r.a.createElement(R,null))},D=(n(54),function(e){var t=e.withBackground,n=e.subtitle;return r.a.createElement("div",{className:"Header ".concat(t?"withBackground":"")},r.a.createElement("div",{className:"app-title"},"Ciao Federico!"),r.a.createElement("div",{className:"app-subtitle"},n))}),x=(n(55),n(56),function(e){var t=e.onClickEvent,n=e.children;return r.a.createElement("div",{onClick:t,className:"FloatingActionButton"},n)});function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var U=r.a.createElement("path",{id:"icon",fillRule:"evenodd",clipRule:"evenodd",d:"M13 11H22V13H13V22H11V13H2V11H11V2H13V11Z"}),k=function(e){var t=e.svgRef,n=e.title,a=w(e,["svgRef","title"]);return r.a.createElement("svg",I({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),n?r.a.createElement("title",null,n):null,U)},M=r.a.forwardRef((function(e,t){return r.a.createElement(k,I({svgRef:t},e))})),H=(n.p,function(e){return{type:"ACTION_OPEN_SCAN_MODAL",payload:e}}),V=(n(57),function(e){return{type:"ACTION_FETCH_PANTRY",payload:e}}),F=function(e){return{type:"ACTION_ADD_PRODUCT_TO_PANTRY",payload:e}},Y=(n(58),n(16)),Z=n.n(Y),B=(n(60),function(e){var t=e.product,n=e.onClickEvent;Z.a.locale("it");var a=Z()(null===t||void 0===t?void 0:t.expiryDate,"YYYY-MM-DD").fromNow(),c=-Z()(new Date).diff(t.expiryDate,"days"),o=c<=0?"expired":c<=3?"expiring":"";return r.a.createElement("div",{onClick:n.bind(void 0),className:"ProductCard card ".concat(o)},r.a.createElement("img",{className:"product-image",src:null===t||void 0===t?void 0:t.image_thumb_url,alt:"product_image"}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"expiry"},a),r.a.createElement("div",{className:"name"},null===t||void 0===t?void 0:t.product_name),r.a.createElement("div",{className:"footer"},(null===t||void 0===t?void 0:t.nutrition_grades)&&r.a.createElement("img",{src:"/img/nutriscore-".concat(null===t||void 0===t?void 0:t.nutrition_grades,".svg"),className:"nutriscore",alt:"nutrition_score"}),(null===t||void 0===t?void 0:t.nova_group)&&r.a.createElement("img",{src:"/img/nova-group-".concat(null===t||void 0===t?void 0:t.nova_group,".svg"),className:"novagroup",alt:"nutrition_score"}),r.a.createElement("div",{className:"qta"},null===t||void 0===t?void 0:t.qta))))}),G=function(e){return{type:"ACTION_SELECT_UPDATING_PRODUCT",payload:e}},q=Object(l.b)((function(e){return{products:e.pantry.expiring.data}}),{fetchProducts:V,openUpdateProduct:G})((function(e){var t=e.products,n=e.fetchProducts,c=e.openUpdateProduct;Object(a.useState)((function(){null===t&&n()}));var o=null===t||void 0===t?void 0:t.map((function(e){return r.a.createElement(B,{onClickEvent:function(){return t=e.code,void c(t);var t},key:"expiring-product-".concat(e.code),product:e})}));return r.a.createElement("div",{className:"PantryExpiringList"},o)})),z=Object(l.b)((function(e){return{expiring:e.pantry.expiring.data}}),{openScanModal:H})((function(e){var t=e.expiring,n=e.openScanModal;return r.a.createElement(L,null,r.a.createElement(D,{withBackground:!0,subtitle:["Hai ",r.a.createElement("strong",{key:"expiring-length"},(null===t||void 0===t?void 0:t.length)||0)," prodotti in scadenza"]}),r.a.createElement("div",{className:"HomePage"},r.a.createElement("div",{className:"content"},r.a.createElement(q,null)),r.a.createElement(x,{onClickEvent:function(){return n()}},r.a.createElement(M,null))))})),W=(n(61),function(){return r.a.createElement(L,null,r.a.createElement(D,{withBackground:!1,subtitle:"Ecco la tua lista della spesa"}),r.a.createElement("div",{className:"SpesaPage"},"Spesa Page"))}),J=(n(62),n(63),Object(l.b)((function(e){return{products:e.pantry.fetch.data}}),{fetchProducts:V,openUpdateProduct:G})((function(e){var t=e.products,n=e.fetchProducts,c=e.openUpdateProduct;Object(a.useState)((function(){null===t&&n()}));var o=null===t||void 0===t?void 0:t.map((function(e){return r.a.createElement(B,{onClickEvent:function(){return t=e.code,void c(t);var t},key:"pantry-product-".concat(e.code),product:e})}));return r.a.createElement("div",{className:"PantryList"},o)}))),X=Object(l.b)((function(e){return{expiring:e.pantry.expiring.data}}),{openScanModal:H})((function(e){var t=e.openScanModal;return r.a.createElement(L,null,r.a.createElement(D,{withBackground:!1,subtitle:"Ecco cosa hai in dispensa"}),r.a.createElement("div",{className:"PantryPage"},r.a.createElement("div",{className:"content"},r.a.createElement(J,null)),r.a.createElement(x,{onClickEvent:function(){return t()}},r.a.createElement(M,null))))}));var K=Object(u.g)(Object(l.b)((function(e){return{}}))((function(e){return e.authenticated,r.a.createElement("div",{style:{minHeight:"100%",minWidth:"100%"}},r.a.createElement(u.c,null,r.a.createElement(u.a,{label:"Home",component:z,path:"/",exact:!0}),r.a.createElement(u.a,{label:"Spesa",component:W,path:"/spesa",exact:!0}),r.a.createElement(u.a,{label:"Dispensa",component:X,path:"/dispensa",exact:!0})))}))),Q=(n(64),n(15)),$=(n(65),n(26)),ee=n(27),te=n(39),ne=n(41),ae=n(19),re=n.n(ae),ce=function(e){Object(ne.a)(n,e);var t=Object(te.a)(n);function n(){return Object($.a)(this,n),t.apply(this,arguments)}return Object(ee.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{id:"interactive",className:"viewport"})}},{key:"componentWillUnmount",value:function(){re.a.offDetected(this._onDetected)}},{key:"_onDetected",value:function(e){this.props.onDetected(e)}},{key:"_onError",value:function(e){this.props.onError(e)}},{key:"stop",value:function(){re.a.stop()}},{key:"componentDidMount",value:function(){var e=this;re.a.init({inputStream:{type:"LiveStream",constraints:{width:window.innerWidth,height:window.innerHeight-72,facingMode:"environment"}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:2,decoder:{readers:["code_128_reader","ean_reader","upc_reader"]},multiple:!1,locate:!0},(function(t){if(t)return e._onError(t),console.log(t);re.a.start()})),re.a.onDetected(this._onDetected.bind(this))}}]),n}(a.Component),oe=(n(66),n(67),function(e){var t=e.product,n=e.onClickEvent;return r.a.createElement("div",{onClick:n,className:"SearchResult card"},r.a.createElement("img",{className:"product-image",src:null===t||void 0===t?void 0:t.image_thumb_url,alt:"product_image"}),r.a.createElement("div",{className:"name"},null===t||void 0===t?void 0:t.product_name))}),ie=Object(l.b)((function(e){return{searchState:e.search}}))((function(e){var t=e.searchState,n=e.onProductSelect,a=null===t||void 0===t?void 0:t.results.map((function(e){return r.a.createElement(oe,{key:"product-".concat(e.code),product:e,onClickEvent:function(){return function(e){n&&"function"===typeof n&&n(e)}(e)}})}));return r.a.createElement("div",{className:"SearchContainer"},t.success&&a,t.loading&&r.a.createElement("span",{className:"loading"},"Cerco i prodotti..."),t.loading||t.success||t.error?"":r.a.createElement("span",{className:"waiting"},"Inserisci il nome del prodotto"))})),ue=Object(l.b)((function(e){var t;return{open:null===(t=e.modals.productScanModal)||void 0===t?void 0:t.open}}),{closeModal:function(e){return{type:"ACTION_CLOSE_SCAN_MODAL",payload:e}},productScan:function(e){return{type:"ACTION_PRODUCT_SCAN",payload:e}},searchForProduct:function(e){return{type:"ACTION_SEARCH_PRODUCT",payload:e}}})((function(e){var t=e.open,n=e.closeModal,c=e.productScan,o=e.searchForProduct,i=Object(a.useState)(""),u=Object(Q.a)(i,2),l=u[0],s=u[1],d=Object(a.useState)(!0),p=Object(Q.a)(d,2),v=p[0],f=p[1],m=Object(a.useRef)(null),O=Object(a.useRef)(null);return r.a.createElement("div",{className:"ProductScanModal ".concat(t?"open":"")},r.a.createElement("div",{className:"header"},r.a.createElement("div",{onClick:function(){m.current&&m.current.stop(),n()}.bind(void 0),className:"close-btn"},r.a.createElement(M,null)),r.a.createElement("div",{className:"app-title"},"Scansiona il codice a barre")),r.a.createElement("div",{className:"search-container"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),m.current&&m.current.stop(),l.length<=2||(O.current&&O.current.blur(),o(l))}.bind(void 0)},r.a.createElement("input",{type:"text",value:l,placeholder:"Cerca un prodotto",ref:O,onChange:function(e){var t=e.target.value;t.length>0&&m.current&&m.current.stop(),s(t)}.bind(void 0)}))),r.a.createElement("div",{className:"reader ".concat(t&&v&&l.length<=0?"":"searching")},t&&v&&l.length<=0?r.a.createElement(ce,{ref:m,onDetected:function(e){t&&(m.current&&m.current.stop(),n(),c(e.codeResult))}.bind(void 0),onError:function(){m.current&&m.current.stop(),f(!1)}.bind(void 0)}):r.a.createElement(ie,{onProductSelect:function(e){e.code&&(n(),c(e))}.bind(void 0)})))})),le=n(3);n(68);function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function de(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var pe=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.41421 12L16.7071 19.2929L15.2929 20.7071L6.58578 12L15.2929 3.29289L16.7071 4.70711L9.41421 12Z"}),ve=function(e){var t=e.svgRef,n=e.title,a=de(e,["svgRef","title"]);return r.a.createElement("svg",se({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),n?r.a.createElement("title",null,n):null,pe)},fe=r.a.forwardRef((function(e,t){return r.a.createElement(ve,se({svgRef:t},e))})),me=(n.p,Object(l.b)((function(e){var t;return{open:null===(t=e.modals.productInsertModal)||void 0===t?void 0:t.open,product:e.products.scannedProduct}}),{closeModal:function(e){return{type:"ACTION_CLOSE_PRODUCT_INSERT_MODAL",payload:e}},openScanModal:H,addProduct:F})((function(e){var t=e.open,n=e.closeModal,c=e.openScanModal,o=e.product,i=e.addProduct,u=Object(a.useState)(""),l=Object(Q.a)(u,2),s=l[0],d=l[1],p=Object(a.useState)((new Date).toISOString().substr(0,10)),v=Object(Q.a)(p,2),f=v[0],m=v[1],O=function(){d(""),m((new Date).toISOString().substr(0,10))};return r.a.createElement("div",{className:"ProductInsertModal ".concat(t?"open":"")},r.a.createElement("div",{className:"header"},r.a.createElement("div",{onClick:function(){O(),n(),c()}.bind(void 0),className:"close-btn"},r.a.createElement(fe,null)),r.a.createElement("div",{className:"app-title"},"Verifica e aggiungi")),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"product-head"},r.a.createElement("img",{src:null===o||void 0===o?void 0:o.image_thumb_url,className:"product-image",alt:"product-image"}),r.a.createElement("div",{className:"product-info"},r.a.createElement("div",{className:"product-name"},null===o||void 0===o?void 0:o.product_name),r.a.createElement("div",{className:"description"},r.a.createElement("span",{className:"title"},"Ingredienti: "),r.a.createElement("span",{className:"ingredients"},(null===o||void 0===o?void 0:o.ingredients_text_it)||(null===o||void 0===o?void 0:o.ingredients_text_en)||(null===o||void 0===o?void 0:o.ingredients_text))))),r.a.createElement("div",{className:"nutriscore-container"},r.a.createElement("img",{src:"/img/nutriscore-".concat(null===o||void 0===o?void 0:o.nutrition_grades,".svg"),className:"nutriscore",alt:"Nessun nutriscore"}),r.a.createElement("img",{src:"/img/nova-group-".concat(null===o||void 0===o?void 0:o.nova_group,".svg"),className:"novagroup",alt:"Nessun novagroup"})),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"input-group card"},r.a.createElement("div",{className:"label"},"Quanit\xe0"),r.a.createElement("input",{type:"text",placeholder:"100 g",value:s,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:"input-group card"},r.a.createElement("div",{className:"label"},"Data di scadenza"),r.a.createElement("input",{type:"date",className:"date",placeholder:"tra 5 giorni",value:f,onChange:function(e){return m(e.target.value)}})),r.a.createElement("div",{onClick:function(){i(Object(le.a)({},o,{qta:s,expiryDate:f})),O(),n()}.bind(void 0),className:"btn btn-success"},"AGGIUNGI PRODOTTO"))))}))),Oe=(n(69),Object(l.b)((function(e){var t;return{open:null===(t=e.modals.productUpdateModal)||void 0===t?void 0:t.open,product:e.products.updatingProduct}}),{closeModal:function(e){return{type:"ACTION_CLOSE_UPDATE_PRODUCT_MODAL",payload:e}},updateProduct:F})((function(e){var t=e.open,n=e.closeModal,c=e.product,o=e.updateProduct,i=Object(a.useState)(""),u=Object(Q.a)(i,2),l=u[0],s=u[1],d=Object(a.useState)(""),p=Object(Q.a)(d,2),v=p[0],f=p[1];Object(a.useEffect)((function(){s((null===c||void 0===c?void 0:c.qta)||""),f((null===c||void 0===c?void 0:c.expiryDate)||"")}),[c]);var m=function(){s(""),f((new Date).toISOString().substr(0,10))};return r.a.createElement("div",{className:"ProductUpdateModal ".concat(t?"open":"")},r.a.createElement("div",{className:"header"},r.a.createElement("div",{onClick:function(){m(),n()}.bind(void 0),className:"close-btn"},r.a.createElement(fe,null)),r.a.createElement("div",{className:"app-title"},"Scheda prodotto")),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"product-head"},r.a.createElement("img",{src:null===c||void 0===c?void 0:c.image_thumb_url,className:"product-image",alt:"product-image"}),r.a.createElement("div",{className:"product-info"},r.a.createElement("div",{className:"product-name"},null===c||void 0===c?void 0:c.product_name),r.a.createElement("div",{className:"description"},r.a.createElement("span",{className:"title"},"Ingredienti: "),r.a.createElement("span",{className:"ingredients"},(null===c||void 0===c?void 0:c.ingredients_text_it)||(null===c||void 0===c?void 0:c.ingredients_text_en)||(null===c||void 0===c?void 0:c.ingredients_text))))),r.a.createElement("div",{className:"nutriscore-container"},r.a.createElement("img",{src:"/img/nutriscore-".concat(null===c||void 0===c?void 0:c.nutrition_grades,".svg"),className:"nutriscore",alt:"Nessun nutriscore"}),r.a.createElement("img",{src:"/img/nova-group-".concat(null===c||void 0===c?void 0:c.nova_group,".svg"),className:"novagroup",alt:"Nessun novagroup"})),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"input-group card"},r.a.createElement("div",{className:"label"},"Quanit\xe0"),r.a.createElement("input",{type:"text",placeholder:"100 g",value:l,onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",{className:"input-group card"},r.a.createElement("div",{className:"label"},"Data di scadenza"),r.a.createElement("input",{type:"date",className:"date",value:v,onChange:function(e){return f(e.target.value)}})),r.a.createElement("div",{onClick:function(){console.log([l,v]),o(Object(le.a)({},c,{qta:l||c.qta,expiryDate:v||c.expiryDate})),m(),n()}.bind(void 0),className:"btn btn-success"},"AGGIORNA PRODOTTO"))))})));var _e=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,{basename:window.baseUrl},r.a.createElement(K,null)),r.a.createElement(ue,null),r.a.createElement(me,null),r.a.createElement(Oe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ee=n(13),ge=n(37),Ce=n(33),be={loading:!1,success:!1,error:!1,data:null},Ne={addProduct:be,fetch:be,expiring:be},ye={};ye.ACTION_FETCH_PANTRY=function(e,t){var n=Object(le.a)({},e);return n.fetch=Object(le.a)({},n.fetch,{loading:!0}),n},ye.ACTION_FETCH_PANTRY_SUCCESS=function(e,t){var n=Object(le.a)({},e);return n.fetch=Object(le.a)({},n.fetch,{success:!0,data:Object(Ce.a)(t.payload.pantry)}),n.expiring=Object(le.a)({},n.expiring,{success:!0,data:Object(Ce.a)(t.payload.expiring)}),n},ye.ACTION_FETCH_PANTRY_FAILURE=function(e,t){var n=Object(le.a)({},e);return n.fetch=Object(le.a)({},n.fetch,{error:!0}),n},ye.ACTION_ADD_PRODUCT_TO_PANTRY=function(e,t){var n=Object(le.a)({},e);return n.addProduct=Object(le.a)({},n.addProduct,{loading:!0}),n},ye.ACTION_ADD_PRODUCT_TO_PANTRY_SUCCESS=function(e,t){var n=Object(le.a)({},e);return n.addProduct=Object(le.a)({},n.addProduct,{success:!0}),n},ye.ACTION_ADD_PRODUCT_TO_PANTRY_FAILURE=function(e,t){var n=Object(le.a)({},e);return n.addProduct=Object(le.a)({},n.addProduct,{error:!0}),n};var he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;return"function"===typeof ye[t.type]?ye[t.type](e,t):e},Te={loading:!1,success:!1,error:!1,results:[]},Pe={};Pe.ACTION_SEARCH_PRODUCT=function(e,t){Object(le.a)({},e);return{loading:!0,success:!1,error:!1,results:[]}},Pe.ACTION_SEARCH_PRODUCT_SUCCESS=function(e,t){Object(le.a)({},e);return{loading:!1,success:!0,error:!1,results:t.payload.filter((function(e){var t;return(null===(t=e.product_name)||void 0===t?void 0:t.length)>0&&e.code.length>0}))}},Pe.ACTION_SEARCH_PRODUCT_FAILURE=function(e,t){Object(le.a)({},e);return{loading:!1,success:!1,error:!0,results:[]}};var Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;return"function"===typeof Pe[t.type]?Pe[t.type](e,t):e},Ae={open:!1},je={productScanModal:Ae,productInsertModal:Ae,productUpdateModal:Ae},Re={};Re.ACTION_CLOSE_UPDATE_PRODUCT_MODAL=function(e,t){var n=Object(le.a)({},e);return n.productUpdateModal={open:!1},n},Re.ACTION_OPEN_UPDATE_PRODUCT_MODAL=function(e,t){var n=Object(le.a)({},e);return n.productUpdateModal={open:!0},n},Re.ACTION_CLOSE_PRODUCT_INSERT_MODAL=function(e,t){var n=Object(le.a)({},e);return n.productInsertModal={open:!1},n},Re.ACTION_OPEN_PRODUCT_INSERT_MODAL=function(e,t){var n=Object(le.a)({},e);return n.productInsertModal={open:!0},n},Re.ACTION_CLOSE_SCAN_MODAL=function(e,t){var n=Object(le.a)({},e);return n.productScanModal={open:!1},n},Re.ACTION_OPEN_SCAN_MODAL=function(e,t){var n=Object(le.a)({},e);return n.productScanModal={open:!0},n};var Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;return"function"===typeof Re[t.type]?Re[t.type](e,t):e},De={},xe={};xe.ACTION_SELECT_UPDATING_PRODUCT=function(e,t){return Object(le.a)({},e)},xe.ACTION_SELECT_UPDATING_PRODUCT_SUCCESS=function(e,t){var n=Object(le.a)({},e);return n.updatingProduct=t.payload,n},xe.ACTION_SELECT_UPDATING_PRODUCT_FAILURE=function(e,t){return Object(le.a)({},e)},xe.ACTION_PRODUCT_SCAN=function(e,t){return Object(le.a)({},e)},xe.ACTION_PRODUCT_SCAN_SUCCESS=function(e,t){var n=Object(le.a)({},e);return n.scannedProduct=t.payload,n},xe.ACTION_PRODUCT_SCAN_FAILURE=function(e,t){return Object(le.a)({},e)},xe.ACTION_FETCH_PRODUCT=function(e,t){return Object(le.a)({},e)},xe.ACTION_FETCH_PRODUCT_SUCCESS=function(e,t){var n=Object(le.a)({},e);return n.product=t.payload,n},xe.ACTION_FETCH_PRODUCT_FAILURE=function(e,t){return Object(le.a)({},e)};var Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;return"function"===typeof xe[t.type]?xe[t.type](e,t):e},we=Object(Ee.c)({pantry:he,search:Se,modals:Le,products:Ie}),Ue=n(4),ke=n.n(Ue),Me=n(7),He=function(){function e(){Object($.a)(this,e),this._pantry=null}return Object(ee.a)(e,[{key:"getPantry",value:function(){if(this._pantry)return this._pantry;var e=localStorage.getItem(this.lsKey),t=JSON.parse(e);return t?(this._pantry=t,t):[]}},{key:"getExpiring",value:function(){return this.getPantry().map((function(e){return e.dateDiff=-Z()(new Date).diff(e.expiryDate,"days"),e})).filter((function(t){return t.dateDiff<=e.EXPIRING_DAYS})).sort((function(e,t){return e.dateDiff-t.dateDiff}))}},{key:"setPantry",value:function(e){var t=JSON.stringify(e);t&&(localStorage.setItem(this.lsKey,t),this._pantry=e)}},{key:"insertIntoPantry",value:function(e){var t=this.getPantry(),n=t.findIndex((function(t){return t.code===e.code}));if(n<0)return this._addToPantry(e);t[n]=e,this.setPantry(t)}},{key:"_addToPantry",value:function(e){var t=this.getPantry();t.push(e),this.setPantry(t)}},{key:"getProduct",value:function(e){return this.getPantry().find((function(t){return t.code===e}))}},{key:"lsKey",get:function(){return"endet_pantry"}}]),e}();He.EXPIRING_DAYS=7;var Ve=new He,Fe=ke.a.mark(Be),Ye=ke.a.mark(Ge),Ze=ke.a.mark(qe);function Be(e){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Me.b)({type:"ACTION_FETCH_PANTRY_SUCCESS",payload:{pantry:Ve.getPantry(),expiring:Ve.getExpiring()}});case 2:case"end":return e.stop()}}),Fe)}function Ge(e){var t;return ke.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,Ve.insertIntoPantry(t),n.next=4,Object(Me.b)({type:"ACTION_ADD_PRODUCT_TO_PANTRY_SUCCESS"});case 4:return n.next=6,Object(Me.b)({type:"ACTION_FETCH_PANTRY"});case 6:case"end":return n.stop()}}),Ye)}function qe(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Me.c)("ACTION_FETCH_PANTRY",Be);case 2:return e.next=4,Object(Me.c)("ACTION_ADD_PRODUCT_TO_PANTRY",Ge);case 4:case"end":return e.stop()}}),Ze)}var ze=qe,We=ke.a.mark(Xe),Je=ke.a.mark(Ke);function Xe(e){var t,n;return ke.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,fetch("https://it.openfoodfacts.org/cgi/search.pl?action=process&json=true&simple_search=1&sort_by=unique_scans_n&fields=code,image_thumb_url,product_name,nutrition_grades,nova_group,ingredients_text_it,ingredients_text_en,ingredients_text&search_terms=".concat(encodeURI(t))).then((function(e){return e.json()}));case 3:if(!(n=a.sent)){a.next=9;break}return a.next=7,Object(Me.b)({type:"ACTION_SEARCH_PRODUCT_SUCCESS",payload:n.products});case 7:a.next=11;break;case 9:return a.next=11,Object(Me.b)({type:"ACTION_SEARCH_PRODUCT_FAILURE"});case 11:case"end":return a.stop()}}),We)}function Ke(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Me.c)("ACTION_SEARCH_PRODUCT",Xe);case 2:case"end":return e.stop()}}),Je)}var Qe=Ke,$e=ke.a.mark(ot),et=ke.a.mark(it),tt=ke.a.mark(ut),nt=ke.a.mark(lt),at=ke.a.mark(st),rt=ke.a.mark(dt),ct=ke.a.mark(pt);function ot(e){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),$e)}function it(e){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),et)}function ut(e){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),tt)}function lt(e){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),nt)}function st(e){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),at)}function dt(e){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.payload;case 1:case"end":return t.stop()}}),rt)}function pt(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Me.c)("ACTION_CLOSE_UPDATE_PRODUCT_MODAL",ot);case 2:return e.next=4,Object(Me.c)("ACTION_OPEN_UPDATE_PRODUCT_MODAL",it);case 4:return e.next=6,Object(Me.c)("ACTION_CLOSE_PRODUCT_INSERT_MODAL",ut);case 6:return e.next=8,Object(Me.c)("ACTION_OPEN_PRODUCT_INSERT_MODAL",lt);case 8:return e.next=10,Object(Me.c)("ACTION_CLOSE_SCAN_MODAL",st);case 10:return e.next=12,Object(Me.c)("ACTION_OPEN_SCAN_MODAL",dt);case 12:case"end":return e.stop()}}),ct)}var vt=pt,ft=ke.a.mark(Et),mt=ke.a.mark(gt),Ot=ke.a.mark(Ct),_t=ke.a.mark(bt);function Et(e){var t;return ke.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Object(Me.b)({type:"ACTION_SELECT_UPDATING_PRODUCT_SUCCESS",payload:Ve.getProduct(t)});case 3:return n.next=5,Object(Me.b)({type:"ACTION_OPEN_UPDATE_PRODUCT_MODAL"});case 5:case"end":return n.stop()}}),ft)}function gt(e){var t,n,a,r;return ke.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!((n=e.payload).code&&(null===(t=n.product_name)||void 0===t?void 0:t.length)>0)){c.next=8;break}return c.next=4,Object(Me.b)({type:"ACTION_PRODUCT_SCAN_SUCCESS",payload:n});case 4:return c.next=6,Object(Me.b)({type:"ACTION_OPEN_PRODUCT_INSERT_MODAL"});case 6:c.next=21;break;case 8:return a="https://world.openfoodfacts.org/api/v0/product/".concat(n.code,".json?fields=image_thumb_url,product_name,nutrition_grades,nova_group,ingredients_text_it,ingredients_text_en,ingredients_text"),c.next=11,fetch(a).then((function(e){return e.json()}));case 11:if(1!==(r=c.sent).status||!r.product){c.next=19;break}return c.next=15,Object(Me.b)({type:"ACTION_PRODUCT_SCAN_SUCCESS",payload:r.product});case 15:return c.next=17,Object(Me.b)({type:"ACTION_OPEN_PRODUCT_INSERT_MODAL"});case 17:c.next=21;break;case 19:return c.next=21,Object(Me.b)({type:"ACTION_PRODUCT_SCAN_FAILURE",payload:r});case 21:case"end":return c.stop()}}),mt)}function Ct(e){var t;return ke.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.payload,"https://world.openfoodfacts.org/api/v0/product/3302749508029.json?fields=image_thumb_url,product_name,nutrition_grades,nova_group",n.next=4,fetch("https://world.openfoodfacts.org/api/v0/product/3302749508029.json?fields=image_thumb_url,product_name,nutrition_grades,nova_group").then((function(e){return e.json()}));case 4:if(1!==(t=n.sent).status||!t.product){n.next=10;break}return n.next=8,Object(Me.b)({type:"ACTION_FETCH_PRODUCT_SUCCESS",payload:t.product});case 8:n.next=12;break;case 10:return n.next=12,Object(Me.b)({type:"ACTION_FETCH_PRODUCT_FAILURE",payload:t});case 12:case"end":return n.stop()}}),Ot)}function bt(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Me.c)("ACTION_SELECT_UPDATING_PRODUCT",Et);case 2:return e.next=4,Object(Me.d)("ACTION_PRODUCT_SCAN",gt);case 4:return e.next=6,Object(Me.c)("ACTION_FETCH_PRODUCT",Ct);case 6:case"end":return e.stop()}}),_t)}var Nt=bt,yt=ke.a.mark(ht);function ht(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Me.a)([ze(),Qe(),vt(),Nt()]);case 2:case"end":return e.stop()}}),yt)}var Tt=ht,Pt=n(40),St=n(38),At=n.n(St);o.a.render(r.a.createElement(l.a,{store:function(){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ee.d,t=Object(Pt.a)(),n=[ge.a,At.a,t],a=Object(Ee.e)(we,e(Ee.a.apply(void 0,n)));return t.run(Tt),a}()},r.a.createElement(_e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.93ac385c.chunk.js.map